# Untilize directly to queue allocated in host memory

devices:
  arch: [grayskull, wormhole, wormhole_b0]

queues:
  in0:            {type: queue, input: HOST    , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x30000000], [0, 0x30010000], [0, 0x30020000], [0, 0x30030000], [0, 0x30040000], [0, 0x30050000], [0, 0x30060000], [0, 0x30070000]]}
  e2e_0:          {type: queue, input: unary0  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20000000], [0, 0x20010000], [0, 0x20020000], [0, 0x20030000], [0, 0x20040000], [0, 0x20050000], [0, 0x20060000], [0, 0x20070000]]}
  e2e_1:          {type: queue, input: unary1  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20100000], [0, 0x20110000], [0, 0x20120000], [0, 0x20130000], [0, 0x20140000], [0, 0x20150000], [0, 0x20160000], [0, 0x20170000]]}
  e2e_2:          {type: queue, input: unary2  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20200000], [0, 0x20210000], [0, 0x20220000], [0, 0x20230000], [0, 0x20240000], [0, 0x20250000], [0, 0x20260000], [0, 0x20270000]]}
  e2e_3:          {type: queue, input: unary3  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20300000], [0, 0x20310000], [0, 0x20320000], [0, 0x20330000], [0, 0x20340000], [0, 0x20350000], [0, 0x20360000], [0, 0x20370000]]}
  e2e_4:          {type: queue, input: unary4  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20400000], [0, 0x20410000], [0, 0x20420000], [0, 0x20430000], [0, 0x20440000], [0, 0x20450000], [0, 0x20460000], [0, 0x20470000]]}
  e2e_5:          {type: queue, input: unary5  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20500000], [0, 0x20510000], [0, 0x20520000], [0, 0x20530000], [0, 0x20540000], [0, 0x20550000], [0, 0x20560000], [0, 0x20570000]]}
  e2e_6:          {type: queue, input: unary6  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20600000], [0, 0x20610000], [0, 0x20620000], [0, 0x20630000], [0, 0x20640000], [0, 0x20650000], [0, 0x20660000], [0, 0x20670000]]}
  e2e_7:          {type: queue, input: unary7  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20700000], [0, 0x20710000], [0, 0x20720000], [0, 0x20730000], [0, 0x20740000], [0, 0x20750000], [0, 0x20760000], [0, 0x20770000]]}
  e2e_8:          {type: queue, input: unary8  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20800000], [0, 0x20810000], [0, 0x20820000], [0, 0x20830000], [0, 0x20840000], [0, 0x20850000], [0, 0x20860000], [0, 0x20870000]]}
  e2e_9:          {type: queue, input: unary9  , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x20900000], [0, 0x20910000], [0, 0x20920000], [0, 0x20930000], [0, 0x20940000], [0, 0x20950000], [0, 0x20960000], [0, 0x20970000]]}
  e2e_10:         {type: queue, input: unary10 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21000000], [0, 0x21010000], [0, 0x21020000], [0, 0x21030000], [0, 0x21040000], [0, 0x21050000], [0, 0x21060000], [0, 0x21070000]]}
  e2e_11:         {type: queue, input: unary11 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21100000], [0, 0x21110000], [0, 0x21120000], [0, 0x21130000], [0, 0x21140000], [0, 0x21150000], [0, 0x21160000], [0, 0x21170000]]}
  e2e_12:         {type: queue, input: unary12 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21200000], [0, 0x21210000], [0, 0x21220000], [0, 0x21230000], [0, 0x21240000], [0, 0x21250000], [0, 0x21260000], [0, 0x21270000]]}
  e2e_13:         {type: queue, input: unary13 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21300000], [0, 0x21310000], [0, 0x21320000], [0, 0x21330000], [0, 0x21340000], [0, 0x21350000], [0, 0x21360000], [0, 0x21370000]]}
  e2e_14:         {type: queue, input: unary14 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21400000], [0, 0x21410000], [0, 0x21420000], [0, 0x21430000], [0, 0x21440000], [0, 0x21450000], [0, 0x21460000], [0, 0x21470000]]}
  e2e_15:         {type: queue, input: unary15 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21500000], [0, 0x21510000], [0, 0x21520000], [0, 0x21530000], [0, 0x21540000], [0, 0x21550000], [0, 0x21560000], [0, 0x21570000]]}
  e2e_16:         {type: queue, input: unary16 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21600000], [0, 0x21610000], [0, 0x21620000], [0, 0x21630000], [0, 0x21640000], [0, 0x21650000], [0, 0x21660000], [0, 0x21670000]]}
  e2e_17:         {type: queue, input: unary17 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21700000], [0, 0x21710000], [0, 0x21720000], [0, 0x21730000], [0, 0x21740000], [0, 0x21750000], [0, 0x21760000], [0, 0x21770000]]}
  e2e_18:         {type: queue, input: unary18 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21800000], [0, 0x21810000], [0, 0x21820000], [0, 0x21830000], [0, 0x21840000], [0, 0x21850000], [0, 0x21860000], [0, 0x21870000]]}
  e2e_19:         {type: queue, input: unary19 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x21900000], [0, 0x21910000], [0, 0x21920000], [0, 0x21930000], [0, 0x21940000], [0, 0x21950000], [0, 0x21960000], [0, 0x21970000]]}
  out0:           {type: queue, input: unary20 , entries: 20, grid_size: [4, 2], t: 1, mblock: [1, 1], ublock: [1, 1], df: Float16, target_device: 0, loc: dram, dram: [[0, 0x10000000], [0, 0x10010000], [0, 0x10020000], [0, 0x10030000], [0, 0x10040000], [0, 0x10050000], [0, 0x10060000], [0, 0x10070000]]}

graphs:
  graph0:
    target_device: 0
    input_count: 4
    unary0: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [in0], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph1:
    target_device: 0
    input_count: 4
    unary1: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_0], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph2:
    target_device: 0
    input_count: 4
    unary2: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_1], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph3:
    target_device: 0
    input_count: 4
    unary3: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_2], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph4:
    target_device: 0
    input_count: 4
    unary4: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_3], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph5:
    target_device: 0
    input_count: 4
    unary5: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_4], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph6:
    target_device: 0
    input_count: 4
    unary6: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_5], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph7:
    target_device: 0
    input_count: 4
    unary7: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_6], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph8:
    target_device: 0
    input_count: 4
    unary8: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_7], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph9:
    target_device: 0
    input_count: 4
    unary9: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_8], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph10:
    target_device: 0
    input_count: 4
    unary10: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_9], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph11:
    target_device: 0
    input_count: 4
    unary11: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_10], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph12:
    target_device: 0
    input_count: 4
    unary12: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_11], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph13:
    target_device: 0
    input_count: 4
    unary13: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_12], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph14:
    target_device: 0
    input_count: 4
    unary14: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_13], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph15:
    target_device: 0
    input_count: 4
    unary15: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_14], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph16:
    target_device: 0
    input_count: 4
    unary16: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_15], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph17:
    target_device: 0
    input_count: 4
    unary17: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_16], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph18:
    target_device: 0
    input_count: 4
    unary18: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_17], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph19:
    target_device: 0
    input_count: 4
    unary19: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_18], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}
  graph20:
    target_device: 0
    input_count: 4
    unary20: {type: nop, grid_loc: [0, 0], grid_size: [4, 2], inputs: [e2e_19], in_df: [Float16], acc_df: Float16, out_df: Float16,  intermed_df: Float16, ublock_order: r, buf_size_mb: 2, math_fidelity: HiFi3, untilize_output: false, t: 1, mblock: [1, 1], ublock: [1, 1]}

programs:
  - program_0:
      - staticvar: {$lptr0: 0, $gptr0: 0}
      - var: {$c_loop_count: 2, $c_input_count: 4, $c_input_wrap: 40}
      - loop: $c_loop_count
      - execute: {graph_name: graph0,  queue_settings: {in0:   {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph1,  queue_settings: {e2e_0: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph2,  queue_settings: {e2e_1: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph3,  queue_settings: {e2e_2: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph4,  queue_settings: {e2e_3: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph5,  queue_settings: {e2e_4: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph6,  queue_settings: {e2e_5: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph7,  queue_settings: {e2e_6: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph8,  queue_settings: {e2e_7: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph9,  queue_settings: {e2e_8: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph10, queue_settings: {e2e_9: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph11, queue_settings: {e2e_10: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph12, queue_settings: {e2e_11: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph13, queue_settings: {e2e_12: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph14, queue_settings: {e2e_13: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph15, queue_settings: {e2e_14: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph16, queue_settings: {e2e_15: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph17, queue_settings: {e2e_16: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph18, queue_settings: {e2e_17: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph19, queue_settings: {e2e_18: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      - execute: {graph_name: graph20, queue_settings: {e2e_19: {prologue: false, epilogue: false, zero: false, rd_ptr_local: $lptr0, rd_ptr_global: $gptr0}}}
      # Varinst update affects lots of buffers, more than would normally fit in external update list, so this
      # causes it to be split into multiple commands.
      - varinst: [$lptr0, incwrap, $c_input_count, $c_input_wrap] # incr and wrap
      - varinst: [$gptr0, incwrap, $c_input_count, $c_input_wrap] # incr and wrap
      - endloop

test-config:
  comparison-config:
    type: AllCloseHw
    atol: 0.01
    rtol: 0.15
    check_pct: 0.50
    check_pcc: 0.92
    verbosity: Concise
  stimulus-config:
    type: Normal
    normal_mean: 0.0
    normal_stddev: 0.1
  io-config:
    inputs: [in0]
    outputs: [out0]
